import{s as w,h as x,e as v}from"./loading-bb5f32dc.js";import{k as D}from"./firebase-51484e84.js";import{b as k}from"./runtime-dom.esm-bundler-a91390dd.js";import{u as C}from"./post-0634ed87.js";import{r as f,A as g,E as P}from"./index-2b1e9f4b.js";import{_ as E}from"./plugin-vue_export-helper-c27b6911.js";import{N as T}from"./index-88ce323e.js";import{w as B,l as N,m as n,E as o,y as a,a3 as r,k as S,C as m,D as h}from"./runtime-core.esm-bundler-08e2c704.js";import"./index-1d84a674.js";import"./index-51ec6782.js";const M={setup(){const i=C(),p=()=>{f.push({name:g})},u=(d,t)=>{f.push({name:P,params:{id:t}})},s=async(d,t)=>{try{await T.confirm("Are you sure you want to delete this post?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}),await i.deletePost(t)}catch(_){console.log(_)}},{posts:l}=D(i);return B(l,d=>{w(),l.value.map(t=>t.formatDate=x(Number(t.date)).format("YYYY-MM-DD")),v()},{immediate:!0,deep:!0}),{tableData:l,addPost:p,handleEdit:u,handleDelete:s}}},Y={class:"inner"},$={class:"content-box"},A={style:{}},O={style:{}},V={style:{}},z={style:{}};function I(i,p,u,s,l,d){const t=r("el-button"),_=r("el-form-item"),c=r("el-table-column"),y=r("el-table");return S(),N("div",Y,[n("div",$,[o(_,null,{default:a(()=>[o(t,{type:"primary",onClick:k(s.addPost,["prevent"])},{default:a(()=>[m("+ 新增公告")]),_:1},8,["onClick"])]),_:1}),o(y,{data:s.tableData,style:{width:"80%"}},{default:a(()=>[o(c,{label:"公告日期",width:"180"},{default:a(e=>[n("div",A,[n("span",O,h(e.row.formatDate),1)])]),_:1}),o(c,{label:"標題"},{default:a(e=>[n("div",V,[n("span",z,h(e.row.content.title),1)])]),_:1}),o(c,{label:"操作"},{default:a(e=>[o(t,{size:"small",onClick:b=>s.handleEdit(e.$index,e.row._id)},{default:a(()=>[m("編輯")]),_:2},1032,["onClick"]),o(t,{size:"small",type:"danger",onClick:b=>s.handleDelete(e.$index,e.row._id)},{default:a(()=>[m("刪除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])}const Q=E(M,[["render",I],["__scopeId","data-v-2d7f6e62"]]);export{Q as default};
