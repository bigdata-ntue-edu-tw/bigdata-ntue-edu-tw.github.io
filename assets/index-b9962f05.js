import{g as le,q as ue,a as ce}from"./quill-0ca21a08.js";class ze{constructor(e,i={}){this.quill=e,this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.quill.root.addEventListener("drop",this.handleDrop,!1),this.quill.root.addEventListener("paste",this.handlePaste,!1)}handleDrop(e){if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length){if(document.caretRangeFromPoint){const i=document.getSelection(),t=document.caretRangeFromPoint(e.clientX,e.clientY);i&&t&&i.setBaseAndExtent(t.startContainer,t.startOffset,t.startContainer,t.startOffset)}this.readFiles(e.dataTransfer.files,this.insert.bind(this))}}handlePaste(e){e.clipboardData&&e.clipboardData.items&&e.clipboardData.items.length&&this.readFiles(e.clipboardData.items,i=>{this.quill.getSelection()||setTimeout(()=>this.insert(i),0)})}insert(e){const i=(this.quill.getSelection()||{}).index||this.quill.getLength();this.quill.insertEmbed(i,"image",e,"user")}readFiles(e,i){[].forEach.call(e,t=>{if(!t.type.match(/^image\/(gif|jpe?g|a?png|svg|webp|bmp|vnd\.microsoft\.icon)/i))return;const a=new FileReader;a.onload=y=>{i(y.target.result)};const u=t.getAsFile?t.getAsFile():t;u instanceof Blob&&a.readAsDataURL(u)})}}var J={},S={},k={},A={},fe=function(e){return se(e)&&!de(e)};function se(n){return!!n&&typeof n=="object"}function de(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||ge(n)}var he=typeof Symbol=="function"&&Symbol.for,ye=he?Symbol.for("react.element"):60103;function ge(n){return n.$$typeof===ye}function ve(n){return Array.isArray(n)?[]:{}}function D(n,e){return e.clone!==!1&&e.isMergeableObject(n)?_(ve(n),n,e):n}function pe(n,e,i){return n.concat(e).map(function(t){return D(t,i)})}function me(n,e,i){var t={};return i.isMergeableObject(n)&&Object.keys(n).forEach(function(a){t[a]=D(n[a],i)}),Object.keys(e).forEach(function(a){!i.isMergeableObject(e[a])||!n[a]?t[a]=D(e[a],i):t[a]=_(n[a],e[a],i)}),t}function _(n,e,i){i=i||{},i.arrayMerge=i.arrayMerge||pe,i.isMergeableObject=i.isMergeableObject||fe;var t=Array.isArray(e),a=Array.isArray(n),u=t===a;return u?t?i.arrayMerge(n,e,i):me(n,e,i):D(e,i)}_.all=function(e,i){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(t,a){return _(t,a,i)},{})};var be=_;const _e=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"})),Oe=le(_e);var w={},U;function b(){if(U)return w;U=1,Object.defineProperty(w,"__esModule",{value:!0});var n=function(){function u(y,d){for(var f=0;f<d.length;f++){var o=d[f];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(y,o.key,o)}}return function(y,d,f){return d&&u(y.prototype,d),f&&u(y,f),y}}(),e=m();i(e);function i(u){return u&&u.__esModule?u:{default:u}}function t(u,y){if(!(u instanceof y))throw new TypeError("Cannot call a class as a function")}var a=function(){function u(y){t(this,u),this.formatter=y}return n(u,[{key:"onCreate",value:function(){}},{key:"onDestroy",value:function(){}},{key:"onUpdate",value:function(){}}]),u}();return w.default=a,w}var C;function m(){if(C)return A;C=1,Object.defineProperty(A,"__esModule",{value:!0});var n=function(){function h(c,r){for(var l=0;l<r.length;l++){var s=r[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}return function(c,r,l){return r&&h(c.prototype,r),l&&h(c,l),c}}(),e=Oe,i=d(e),t=ae(),a=d(t),u=b();d(u);var y=O();d(y);function d(h){return h&&h.__esModule?h:{default:h}}function f(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function(c,r){return r},g=function(){function h(c){var r=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f(this,h),this.onClick=function(){r.hide()},this.quill=c,this.options=(0,i.default)(a.default,l,{arrayMerge:o}),this.currentSpec=null,this.actions=[],this.overlay=document.createElement("div"),this.overlay.classList.add(this.options.overlay.className),this.options.overlay.style&&Object.assign(this.overlay.style,this.options.overlay.style),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.quill.root.addEventListener("click",this.onClick),this.specs=this.options.specs.map(function(s){return new s(r)}),this.specs.forEach(function(s){return s.init()})}return n(h,[{key:"show",value:function(r){this.currentSpec=r,this.currentSpec.setSelection(),this.setUserSelect("none"),this.quill.root.parentNode.appendChild(this.overlay),this.repositionOverlay(),this.createActions(r)}},{key:"hide",value:function(){this.currentSpec&&(this.currentSpec.onHide(),this.currentSpec=null,this.quill.root.parentNode.removeChild(this.overlay),this.overlay.style.setProperty("display","none"),this.setUserSelect(""),this.destroyActions())}},{key:"update",value:function(){this.repositionOverlay(),this.actions.forEach(function(r){return r.onUpdate()})}},{key:"createActions",value:function(r){var l=this;this.actions=r.getActions().map(function(s){var v=new s(l);return v.onCreate(),v})}},{key:"destroyActions",value:function(){this.actions.forEach(function(r){return r.onDestroy()}),this.actions=[]}},{key:"repositionOverlay",value:function(){if(this.currentSpec){var r=this.currentSpec.getOverlayElement();if(r){var l=this.quill.root.parentNode,s=r.getBoundingClientRect(),v=l.getBoundingClientRect();Object.assign(this.overlay.style,{display:"block",left:s.left-v.left-1+l.scrollLeft+"px",top:s.top-v.top+l.scrollTop+"px",width:s.width+"px",height:s.height+"px"})}}}},{key:"setUserSelect",value:function(r){var l=this,s=["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"];s.forEach(function(v){l.quill.root.style.setProperty(v,r),document.documentElement&&document.documentElement.style.setProperty(v,r)})}}]),h}();return A.default=g,A}var E={},q={};Object.defineProperty(q,"__esModule",{value:!0});var Se=function(){function n(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}}();function j(n,e,i){return e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function ke(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var I="left",L="center",H="right",Ae=function(){function n(e){var i=this,t;ke(this,n),this.applyStyle=e.aligner.applyStyle,this.alignAttribute=e.attribute,this.alignments=(t={},j(t,I,{name:I,icon:e.icons.left,apply:function(u){i.setAlignment(u,I),i.setStyle(u,"inline","left","0 1em 1em 0")}}),j(t,L,{name:L,icon:e.icons.center,apply:function(u){i.setAlignment(u,L),i.setStyle(u,"block",null,"auto")}}),j(t,H,{name:H,icon:e.icons.right,apply:function(u){i.setAlignment(u,H),i.setStyle(u,"inline","right","0 0 1em 1em")}}),t)}return Se(n,[{key:"getAlignments",value:function(){var i=this;return Object.keys(this.alignments).map(function(t){return i.alignments[t]})}},{key:"clear",value:function(i){i.removeAttribute(this.alignAttribute),this.setStyle(i,null,null,null)}},{key:"isAligned",value:function(i,t){return i.getAttribute(this.alignAttribute)===t.name}},{key:"setAlignment",value:function(i,t){i.setAttribute(this.alignAttribute,t)}},{key:"setStyle",value:function(i,t,a,u){this.applyStyle&&(i.style.setProperty("display",t),i.style.setProperty("float",a),i.style.setProperty("margin",u))}}]),n}();q.default=Ae;var F={},z;function Q(){if(z)return F;z=1;var n=m();e(n);function e(i){return i&&i.__esModule?i:{default:i}}return F}var x={},$;function Z(){if($)return x;$=1,Object.defineProperty(x,"__esModule",{value:!0});var n=function(){function u(y,d){for(var f=0;f<d.length;f++){var o=d[f];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(y,o.key,o)}}return function(y,d,f){return d&&u(y.prototype,d),f&&u(y,f),y}}();Q();var e=m();i(e);function i(u){return u&&u.__esModule?u:{default:u}}function t(u,y){if(!(u instanceof y))throw new TypeError("Cannot call a class as a function")}var a=function(){function u(){t(this,u),this.toolbar=null,this.buttons=[]}return n(u,[{key:"create",value:function(d,f){var o=document.createElement("div");return o.classList.add(d.options.align.toolbar.mainClassName),this.addToolbarStyle(d,o),this.addButtons(d,o,f),this.toolbar=o,this.toolbar}},{key:"destroy",value:function(){this.toolbar=null,this.buttons=[]}},{key:"getElement",value:function(){return this.toolbar}},{key:"addToolbarStyle",value:function(d,f){d.options.align.toolbar.mainStyle&&Object.assign(f.style,d.options.align.toolbar.mainStyle)}},{key:"addButtonStyle",value:function(d,f,o){o.options.align.toolbar.buttonStyle&&(Object.assign(d.style,o.options.align.toolbar.buttonStyle),f>0&&(d.style.borderLeftWidth="0")),o.options.align.toolbar.svgStyle&&Object.assign(d.children[0].style,o.options.align.toolbar.svgStyle)}},{key:"addButtons",value:function(d,f,o){var g=this;o.getAlignments().forEach(function(h,c){var r=document.createElement("span");r.classList.add(d.options.align.toolbar.buttonClassName),r.innerHTML=h.icon,r.addEventListener("click",function(){g.onButtonClick(r,d,h,o)}),g.preselectButton(r,h,d,o),g.addButtonStyle(r,c,d),g.buttons.push(r),f.appendChild(r)})}},{key:"preselectButton",value:function(d,f,o,g){if(o.currentSpec){var h=o.currentSpec.getTargetElement();h&&g.isAligned(h,f)&&this.selectButton(o,d)}}},{key:"onButtonClick",value:function(d,f,o,g){if(f.currentSpec){var h=f.currentSpec.getTargetElement();h&&this.clickButton(d,h,f,o,g)}}},{key:"clickButton",value:function(d,f,o,g,h){var c=this;this.buttons.forEach(function(r){c.deselectButton(o,r)}),h.isAligned(f,g)?o.options.align.toolbar.allowDeselect?h.clear(f):this.selectButton(o,d):(this.selectButton(o,d),g.apply(f)),o.update()}},{key:"selectButton",value:function(d,f){f.classList.add("is-selected"),d.options.align.toolbar.addButtonSelectStyle&&f.style.setProperty("filter","invert(20%)")}},{key:"deselectButton",value:function(d,f){f.classList.remove("is-selected"),d.options.align.toolbar.addButtonSelectStyle&&f.style.removeProperty("filter")}}]),u}();return x.default=a,x}var N;function ee(){if(N)return E;N=1,Object.defineProperty(E,"__esModule",{value:!0});var n=function(){function r(l,s){for(var v=0;v<s.length;v++){var p=s[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(l,p.key,p)}}return function(l,s,v){return s&&r(l.prototype,s),v&&r(l,v),l}}(),e=b(),i=f(e),t=m();f(t);var a=q,u=f(a);Q();var y=Z(),d=f(y);function f(r){return r&&r.__esModule?r:{default:r}}function o(r,l){if(!(r instanceof l))throw new TypeError("Cannot call a class as a function")}function g(r,l){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:r}function h(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);r.prototype=Object.create(l&&l.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(r,l):r.__proto__=l)}var c=function(r){h(l,r);function l(s){o(this,l);var v=g(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,s));return v.aligner=new u.default(s.options.align),v.toolbar=new d.default,v}return n(l,[{key:"onCreate",value:function(){var v=this.toolbar.create(this.formatter,this.aligner);this.formatter.overlay.appendChild(v)}},{key:"onDestroy",value:function(){var v=this.toolbar.getElement();v&&(this.formatter.overlay.removeChild(v),this.toolbar.destroy())}}]),l}(i.default);return E.default=c,E}var T={};Object.defineProperty(T,"__esModule",{value:!0});var we=function(){function n(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}}(),Ee=b(),xe=te(Ee),Pe=m();te(Pe);function te(n){return n&&n.__esModule?n:{default:n}}function Re(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Be(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function De(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var qe=function(n){De(e,n);function e(i){Re(this,e);var t=Be(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return t.onMouseDown=function(a){if(a.target instanceof HTMLElement&&(t.dragHandle=a.target,t.setCursor(t.dragHandle.style.cursor),!!t.formatter.currentSpec)){var u=t.formatter.currentSpec.getTargetElement();if(u){var y=u.getBoundingClientRect();t.dragStartX=a.clientX,t.preDragWidth=y.width,t.targetRatio=y.height/y.width,document.addEventListener("mousemove",t.onDrag),document.addEventListener("mouseup",t.onMouseUp)}}},t.onDrag=function(a){if(t.formatter.currentSpec){var u=t.formatter.currentSpec.getTargetElement();if(u){var y=a.clientX-t.dragStartX,d=0;t.dragHandle===t.topLeftHandle||t.dragHandle===t.bottomLeftHandle?d=Math.round(t.preDragWidth-y):d=Math.round(t.preDragWidth+y);var f=t.targetRatio*d;u.setAttribute("width",""+d),u.setAttribute("height",""+f),t.formatter.update()}}},t.onMouseUp=function(){t.setCursor(""),document.removeEventListener("mousemove",t.onDrag),document.removeEventListener("mouseup",t.onMouseUp)},t.topLeftHandle=t.createHandle("top-left","nwse-resize"),t.topRightHandle=t.createHandle("top-right","nesw-resize"),t.bottomRightHandle=t.createHandle("bottom-right","nwse-resize"),t.bottomLeftHandle=t.createHandle("bottom-left","nesw-resize"),t.dragHandle=null,t.dragStartX=0,t.preDragWidth=0,t.targetRatio=0,t}return we(e,[{key:"onCreate",value:function(){this.formatter.overlay.appendChild(this.topLeftHandle),this.formatter.overlay.appendChild(this.topRightHandle),this.formatter.overlay.appendChild(this.bottomRightHandle),this.formatter.overlay.appendChild(this.bottomLeftHandle),this.repositionHandles(this.formatter.options.resize.handleStyle)}},{key:"onDestroy",value:function(){this.setCursor(""),this.formatter.overlay.removeChild(this.topLeftHandle),this.formatter.overlay.removeChild(this.topRightHandle),this.formatter.overlay.removeChild(this.bottomRightHandle),this.formatter.overlay.removeChild(this.bottomLeftHandle)}},{key:"createHandle",value:function(t,a){var u=document.createElement("div");return u.classList.add(this.formatter.options.resize.handleClassName),u.setAttribute("data-position",t),u.style.cursor=a,this.formatter.options.resize.handleStyle&&Object.assign(u.style,this.formatter.options.resize.handleStyle),u.addEventListener("mousedown",this.onMouseDown),u}},{key:"repositionHandles",value:function(t){var a="0px",u="0px";t&&(t.width&&(a=-parseFloat(t.width)/2+"px"),t.height&&(u=-parseFloat(t.height)/2+"px")),Object.assign(this.topLeftHandle.style,{left:a,top:u}),Object.assign(this.topRightHandle.style,{right:a,top:u}),Object.assign(this.bottomRightHandle.style,{right:a,bottom:u}),Object.assign(this.bottomLeftHandle.style,{left:a,bottom:u})}},{key:"setCursor",value:function(t){if(document.body&&(document.body.style.cursor=t),this.formatter.currentSpec){var a=this.formatter.currentSpec.getOverlayElement();a&&(a.style.cursor=t)}}}]),e}(xe.default);T.default=qe;var M={};Object.defineProperty(M,"__esModule",{value:!0});var Te=function(){function n(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}}(),Me=ue,je=ne(Me),Ie=b(),Le=ne(Ie);function ne(n){return n&&n.__esModule?n:{default:n}}function He(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function V(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Ue(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Ce=function(n){Ue(e,n);function e(){var i,t,a,u;He(this,e);for(var y=arguments.length,d=Array(y),f=0;f<y;f++)d[f]=arguments[f];return u=(t=(a=V(this,(i=e.__proto__||Object.getPrototypeOf(e)).call.apply(i,[this].concat(d))),a),a.onKeyUp=function(o){if(a.formatter.currentSpec&&(o.keyCode===46||o.keyCode===8)){var g=je.default.find(a.formatter.currentSpec.getTargetElement());g&&g.deleteAt(0),a.formatter.hide()}},t),V(a,u)}return Te(e,[{key:"onCreate",value:function(){document.addEventListener("keyup",this.onKeyUp,!0),this.formatter.quill.root.addEventListener("input",this.onKeyUp,!0)}},{key:"onDestroy",value:function(){document.removeEventListener("keyup",this.onKeyUp),this.formatter.quill.root.removeEventListener("input",this.onKeyUp)}}]),e}(Le.default);M.default=Ce;var X;function O(){if(X)return k;X=1,Object.defineProperty(k,"__esModule",{value:!0});var n=function(){function c(r,l){for(var s=0;s<l.length;s++){var v=l[s];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(r,v.key,v)}}return function(r,l,s){return l&&c(r.prototype,l),s&&c(r,s),r}}(),e=m();o(e);var i=b();o(i);var t=ee(),a=o(t),u=T,y=o(u),d=M,f=o(d);function o(c){return c&&c.__esModule?c:{default:c}}function g(c,r){if(!(c instanceof r))throw new TypeError("Cannot call a class as a function")}var h=function(){function c(r){g(this,c),this.formatter=r}return n(c,[{key:"init",value:function(){}},{key:"getActions",value:function(){return[a.default,y.default,f.default]}},{key:"getTargetElement",value:function(){return null}},{key:"getOverlayElement",value:function(){return this.getTargetElement()}},{key:"setSelection",value:function(){this.formatter.quill.setSelection(null)}},{key:"onHide",value:function(){}}]),c}();return k.default=h,k}var P={},W;function re(){if(W)return P;W=1,Object.defineProperty(P,"__esModule",{value:!0});var n=function(){function o(g,h){for(var c=0;c<h.length;c++){var r=h[c];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(g,r.key,r)}}return function(g,h,c){return h&&o(g.prototype,h),c&&o(g,c),g}}(),e=O(),i=a(e),t=m();a(t);function a(o){return o&&o.__esModule?o:{default:o}}function u(o,g){if(!(o instanceof g))throw new TypeError("Cannot call a class as a function")}function y(o,g){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:o}function d(o,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);o.prototype=Object.create(g&&g.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(o,g):o.__proto__=g)}var f=function(o){d(g,o);function g(h){u(this,g);var c=y(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,h));return c.onClick=function(r){var l=r.target;!(l instanceof HTMLElement)||l.tagName!=="IMG"||(c.img=l,c.formatter.show(c))},c.img=null,c}return n(g,[{key:"init",value:function(){this.formatter.quill.root.addEventListener("click",this.onClick)}},{key:"getTargetElement",value:function(){return this.img}},{key:"onHide",value:function(){this.img=null}}]),g}(i.default);return P.default=f,P}var R={},B={},G;function ie(){if(G)return B;G=1,Object.defineProperty(B,"__esModule",{value:!0});var n=function(){function h(c,r){for(var l=0;l<r.length;l++){var s=r[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}return function(c,r,l){return r&&h(c.prototype,r),l&&h(c,l),c}}(),e=O(),i=a(e),t=m();a(t);function a(h){return h&&h.__esModule?h:{default:h}}function u(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function y(h,c){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:h}function d(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(h,c):h.__proto__=c)}var f="data-blot-formatter-unclickable-bound",o="blot-formatter__proxy-image",g=function(h){d(c,h);function c(r,l){u(this,c);var s=y(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,r));return s.onTextChange=function(){Array.from(document.querySelectorAll(s.selector+":not(["+f+"])")).forEach(function(v){v.setAttribute(f,"true"),v.addEventListener("mouseenter",s.onMouseEnter)})},s.onMouseEnter=function(v){var p=v.target;p instanceof HTMLElement&&(s.nextUnclickable=p,s.repositionProxyImage(s.nextUnclickable))},s.onProxyImageClick=function(){s.unclickable=s.nextUnclickable,s.nextUnclickable=null,s.formatter.show(s),s.hideProxyImage()},s.selector=l,s.unclickable=null,s.nextUnclickable=null,s}return n(c,[{key:"init",value:function(){document.body&&document.body.appendChild(this.createProxyImage()),this.hideProxyImage(),this.proxyImage.addEventListener("click",this.onProxyImageClick),this.formatter.quill.on("text-change",this.onTextChange)}},{key:"getTargetElement",value:function(){return this.unclickable}},{key:"getOverlayElement",value:function(){return this.unclickable}},{key:"onHide",value:function(){this.hideProxyImage(),this.nextUnclickable=null,this.unclickable=null}},{key:"createProxyImage",value:function(){var l=document.createElement("canvas"),s=l.getContext("2d");return s.globalAlpha=0,s.fillRect(0,0,1,1),this.proxyImage=document.createElement("img"),this.proxyImage.src=l.toDataURL("image/png"),this.proxyImage.classList.add(o),Object.assign(this.proxyImage.style,{position:"absolute",margin:"0"}),this.proxyImage}},{key:"hideProxyImage",value:function(){Object.assign(this.proxyImage.style,{display:"none"})}},{key:"repositionProxyImage",value:function(l){var s=l.getBoundingClientRect();Object.assign(this.proxyImage.style,{display:"block",left:s.left+window.pageXOffset+"px",top:s.top+window.pageYOffset+"px",width:s.width+"px",height:s.height+"px"})}}]),c}(i.default);return B.default=g,B}var K;function oe(){if(K)return R;K=1,Object.defineProperty(R,"__esModule",{value:!0});var n=ie(),e=t(n),i=m();t(i);function t(f){return f&&f.__esModule?f:{default:f}}function a(f,o){if(!(f instanceof o))throw new TypeError("Cannot call a class as a function")}function u(f,o){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:f}function y(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);f.prototype=Object.create(o&&o.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(f,o):f.__proto__=o)}var d=function(f){y(o,f);function o(g){return a(this,o),u(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,g,"iframe.ql-video"))}return o}(e.default);return R.default=d,R}var Y;function ae(){if(Y)return S;Y=1,Object.defineProperty(S,"__esModule",{value:!0});var n=O();u(n);var e=re(),i=u(e),t=oe(),a=u(t);function u(d){return d&&d.__esModule?d:{default:d}}var y={specs:[i.default,a.default],overlay:{className:"blot-formatter__overlay",style:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"}},align:{attribute:"data-align",aligner:{applyStyle:!0},icons:{left:`
        <svg viewbox="0 0 18 18">
          <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>
          <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>
          <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>
        </svg>
      `,center:`
        <svg viewbox="0 0 18 18">
           <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
          <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>
          <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>
        </svg>
      `,right:`
        <svg viewbox="0 0 18 18">
          <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
          <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>
          <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>
        </svg>
      `},toolbar:{allowDeselect:!0,mainClassName:"blot-formatter__toolbar",mainStyle:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default",zIndex:"1"},buttonClassName:"blot-formatter__toolbar-button",addButtonSelectStyle:!0,buttonStyle:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},svgStyle:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"}}},resize:{handleClassName:"blot-formatter__resize-handle",handleStyle:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"}}};return S.default=y,S}(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=ae();Object.defineProperty(n,"DefaultOptions",{enumerable:!0,get:function(){return r(e).default}});var i=m();Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}});var t=b();Object.defineProperty(n,"Action",{enumerable:!0,get:function(){return r(t).default}});var a=ee();Object.defineProperty(n,"AlignAction",{enumerable:!0,get:function(){return r(a).default}});var u=q;Object.defineProperty(n,"DefaultAligner",{enumerable:!0,get:function(){return r(u).default}});var y=Z();Object.defineProperty(n,"DefaultToolbar",{enumerable:!0,get:function(){return r(y).default}});var d=M;Object.defineProperty(n,"DeleteAction",{enumerable:!0,get:function(){return r(d).default}});var f=T;Object.defineProperty(n,"ResizeAction",{enumerable:!0,get:function(){return r(f).default}});var o=O();Object.defineProperty(n,"BlotSpec",{enumerable:!0,get:function(){return r(o).default}});var g=re();Object.defineProperty(n,"ImageSpec",{enumerable:!0,get:function(){return r(g).default}});var h=ie();Object.defineProperty(n,"UnclickableBlotSpec",{enumerable:!0,get:function(){return r(h).default}});var c=oe();Object.defineProperty(n,"IframeVideoSpec",{enumerable:!0,get:function(){return r(c).default}});function r(l){return l&&l.__esModule?l:{default:l}}})(J);const $e=ce(J);export{$e as B,ze as I};
