import{_ as E,s as z,r as g,t as L,w as U,i as V,h as b,l as o,d,N as y,y as S,O as w,e as i,f as _,F as q,x as B,b as D,j as M,H as v,A as N,p as T,m as O}from"./index-360cec32.js";import{I as R}from"./index-2e753dd1.js";import{s as C,e as I}from"./loading-ca52e56c.js";const x={props:["id"],setup(l){C();const{id:t}=l,r=z(),e=g(null),n=g({title:"",content:"",links:[],dateStart:"",dateEnd:""}),f=()=>{n.value={title:"",content:"",links:[],dateStart:"",dateEnd:""}},u=[{name:"ImageDrop",module:R}],s={modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}},{activiesLoaded:m}=L(r);return U(m,c=>{c&&(I(),t&&(n.value=r.getActiviesContent(t)))},{immediate:!0,deep:!0}),{id:t,form:n,rules:{title:[{required:!0,message:"請輸入活動標題",trigger:"blur"}]},formRef:e,addLink:()=>{n.value.links.push({title:"",url:""})},onSubmit:()=>{C(),n.value.title&&n.value.content?(t?r.updateActivity(t,n.value):r.addActivity(n.value),f(),y.success(t?"更新活動成功":"新增活動成功"),S.replace({name:w})):y.error("活動標題、內容不得為空"),I()},cancel:()=>{f(),S.replace({name:w})},activityStore:r,editorOption:s,editorModules:u}}},H=l=>(T("data-v-23d2b5e2"),l=l(),O(),l),Y={class:"inner"},j={class:"content-box"},F=H(()=>b("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[b("path",{fill:"#409eff",d:"M11 19v-6H5v-2h6V5h2v6h6v2h-6v6h-2Z"})],-1));function Z(l,t,r,e,n,f){const u=i("el-input"),s=i("el-form-item"),m=i("el-date-picker"),h=i("quill-editor"),p=i("el-button"),k=i("el-form");return _(),V("div",Y,[b("div",j,[o(k,{ref:"formRef",model:e.form,rules:e.rules},{default:d(()=>[o(s,{label:"活動標題",prop:"title"},{default:d(()=>[o(u,{modelValue:e.form.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.form.title=a)},null,8,["modelValue"])]),_:1}),o(s,{label:"上架時間",prop:""},{default:d(()=>[o(m,{modelValue:e.form.dateStart,"onUpdate:modelValue":t[1]||(t[1]=a=>e.form.dateStart=a),type:"date",placeholder:"上架時間","disabled-date":l.disabledDate,shortcuts:l.shortcuts,size:l.size},null,8,["modelValue","disabled-date","shortcuts","size"])]),_:1}),o(s,{label:"下架時間",prop:""},{default:d(()=>[o(m,{modelValue:e.form.dateEnd,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.dateEnd=a),type:"date",placeholder:"下架時間","disabled-date":l.disabledDate,shortcuts:l.shortcuts,size:l.size},null,8,["modelValue","disabled-date","shortcuts","size"])]),_:1}),o(h,{class:"quill-editor",theme:"snow",content:e.form.content,"onUpdate:content":t[3]||(t[3]=a=>e.form.content=a),"content-type":"html",options:e.editorOption,modules:e.editorModules},null,8,["content","options","modules"]),(_(!0),V(q,null,B(e.form.links,(a,c)=>(_(),D(s,{label:`Youtube 連結 ${c+1}`,key:c,prop:`form.links${c}.url`},{default:d(()=>[o(u,{modelValue:a.url,"onUpdate:modelValue":A=>a.url=A},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"]))),128)),o(p,{class:"add-link",onClick:M(e.addLink,["prevent"])},{default:d(()=>[v(" 增加新連結 "),F]),_:1},8,["onClick"]),o(s,null,{default:d(()=>[o(p,{type:"primary",onClick:e.onSubmit},{default:d(()=>[v(N(e.id?"更新":"建立"),1)]),_:1},8,["onClick"]),o(p,{onClick:e.cancel},{default:d(()=>[v("取消")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])])}const P=E(x,[["render",Z],["__scopeId","data-v-23d2b5e2"]]);export{P as default};
