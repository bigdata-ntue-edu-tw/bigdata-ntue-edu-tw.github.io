import"./moment-820a4055.js";import{k as B}from"./firebase-917d75a2.js";import{I as E,B as P}from"./index-b9962f05.js";import{u as U}from"./post-a56b13b1.js";import{s as b,e as g}from"./loading-f001d740.js";import{r as k,P as V}from"./index-08706a63.js";import{_ as z}from"./plugin-vue_export-helper-c27b6911.js";import{a as v}from"./index-8788ed98.js";import{r as S,w as D,l as q,m as w,x as I,y as n,B as N,a3 as i,k as y,E as t,C as h,D as F}from"./runtime-core.esm-bundler-1860ea7f.js";import"./runtime-dom.esm-bundler-d3981d03.js";import"./quill-0ca21a08.js";import"./index-a861324b.js";const L={props:["id"],setup(a){b();const{id:o}=a,d=U(),e=S(null),c={title:"",content:"",imageUrl:"",dateStart:"",dateEnd:""},r=S({...c}),m=()=>{r.value={...c}},s=[{name:"ImageDrop",module:E},{name:"BlotFormatter",module:P}],u={modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}},{postsLoaded:p}=B(d);return D(p,C=>{C&&(g(),o&&(r.value=d.getPostContent(o)))},{immediate:!0,deep:!0}),{id:o,form:r,rules:{title:[{required:!0,message:"請輸入公告標題",trigger:"blur"}]},formRef:e,onSubmit:()=>{b(),console.log(r.value),r.value.title&&r.value.content?(o?d.updatePost(o,r.value):d.addPost(r.value),m(),v.success(o?"更新公告成功":"新增公告成功"),k.replace({name:V})):v.error("公告標題、內容不得為空"),g()},cancel:()=>{m(),k.replace({name:V})},postStore:d,editorOption:u,editorModules:s}}},M={class:"inner"},O={class:"content-box"};function R(a,o,d,e,c,r){const m=i("el-input"),s=i("el-form-item"),u=i("el-date-picker"),p=i("quill-editor"),f=i("el-button"),_=i("el-form");return y(),q("div",M,[w("div",O,[e.postStore.loading?(y(),I(_,{key:0,ref:"formRef",model:e.form,rules:e.rules},{default:n(()=>[t(s,{label:"公告標題",prop:"title"},{default:n(()=>[t(m,{modelValue:e.form.title,"onUpdate:modelValue":o[0]||(o[0]=l=>e.form.title=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"公告縮圖連結",prop:"title"},{default:n(()=>[t(m,{modelValue:e.form.imageUrl,"onUpdate:modelValue":o[1]||(o[1]=l=>e.form.imageUrl=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"上架時間",prop:""},{default:n(()=>[t(u,{modelValue:e.form.dateStart,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.dateStart=l),type:"date",placeholder:"上架時間","disabled-date":a.disabledDate,shortcuts:a.shortcuts,size:a.size},null,8,["modelValue","disabled-date","shortcuts","size"])]),_:1}),t(s,{label:"下架時間",prop:""},{default:n(()=>[t(u,{modelValue:e.form.dateEnd,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.dateEnd=l),type:"date",placeholder:"下架時間","disabled-date":a.disabledDate,shortcuts:a.shortcuts,size:a.size},null,8,["modelValue","disabled-date","shortcuts","size"])]),_:1}),t(p,{class:"quill-editor",theme:"snow",content:e.form.content,"onUpdate:content":o[4]||(o[4]=l=>e.form.content=l),"content-type":"html",options:e.editorOption,modules:e.editorModules},null,8,["content","options","modules"]),t(s,null,{default:n(()=>[t(f,{type:"primary",onClick:e.onSubmit},{default:n(()=>[h(F(e.id?"更新":"建立"),1)]),_:1},8,["onClick"]),t(f,{onClick:e.cancel},{default:n(()=>[h("取消")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])):N("",!0)])])}const Z=z(L,[["render",R],["__scopeId","data-v-3b57605e"]]);export{Z as default};
