import{d as y,g,a as h,h as A,i as p,X as D,t as S,j as w,Z as v,Y as b}from"./firebase-917d75a2.js";let s,u,c=null;const L=y("storeActivity",{state:()=>({activies:[],activiesLoaded:!1,loading:null}),actions:{init(){s=g(h,"activities"),u=A(s,p("date","desc")),this.loading=this.getActivies()},async addActivity(t){let a=new Date().getTime(),e=a.toString();await D(s,{content:t,date:e})},async getActivies(){this.activiesLoaded=!1;let t=()=>{},a=new Promise(e=>t=e);return c&&c(),c=S(u,e=>{let n=[];e.forEach(i=>{let o={_id:i.id,content:i.data().content,date:i.data().date,col:"activities"};if(i.data().content.dateStart){const f=moment(Number(i.data().content.dateStart.toDate())),m=moment(Number(i.data().content.dateEnd.toDate())),r=moment(),d=r.diff(f,"days"),l=r.diff(m,"days");console.log(d,l),d>=0&&l<=0&&n.push(o)}else n.push(o);n.push(o)}),this.activies=n,this.activiesLoaded=!0,t()},e=>{console.error("error.message: ",e.message)}),a},async deleteActivity(t){await w(v(s,t))},async updateActivity(t,a){await b(v(s,t),{content:a})}},getters:{getActiviesContent:t=>a=>t.activies.filter(e=>e._id===a)[0].content}});export{L as u};
