import{w as b}from"./moment-820a4055.js";import{k as x}from"./firebase-917d75a2.js";import{b as v}from"./runtime-dom.esm-bundler-d3981d03.js";import{u as D}from"./post-a56b13b1.js";import{s as k,e as C}from"./loading-f001d740.js";import{r as u,A as g,E as P}from"./index-08706a63.js";import{_ as E}from"./plugin-vue_export-helper-c27b6911.js";import{N as T}from"./index-97bb3002.js";import{w as B,l as N,m as n,E as o,y as a,a3 as r,k as S,C as m,D as h}from"./runtime-core.esm-bundler-1860ea7f.js";import"./index-a861324b.js";const M={setup(){const i=D(),p=()=>{u.push({name:g})},f=(d,t)=>{u.push({name:P,params:{id:t}})},s=async(d,t)=>{try{await T.confirm("Are you sure you want to delete this post?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}),await i.deletePost(t)}catch(_){console.log(_)}},{posts:l}=x(i);return B(l,d=>{k(),l.value.map(t=>t.formatDate=b(Number(t.date)).format("YYYY-MM-DD")),C()},{immediate:!0,deep:!0}),{tableData:l,addPost:p,handleEdit:f,handleDelete:s}}},Y={class:"inner"},$={class:"content-box"},A={style:{}},O={style:{}},V={style:{}},z={style:{}};function I(i,p,f,s,l,d){const t=r("el-button"),_=r("el-form-item"),c=r("el-table-column"),y=r("el-table");return S(),N("div",Y,[n("div",$,[o(_,null,{default:a(()=>[o(t,{type:"primary",onClick:v(s.addPost,["prevent"])},{default:a(()=>[m("+ 新增公告")]),_:1},8,["onClick"])]),_:1}),o(y,{data:s.tableData,style:{width:"80%"}},{default:a(()=>[o(c,{label:"公告日期",width:"180"},{default:a(e=>[n("div",A,[n("span",O,h(e.row.formatDate),1)])]),_:1}),o(c,{label:"標題"},{default:a(e=>[n("div",V,[n("span",z,h(e.row.content.title),1)])]),_:1}),o(c,{label:"操作"},{default:a(e=>[o(t,{size:"small",onClick:w=>s.handleEdit(e.$index,e.row._id)},{default:a(()=>[m("編輯")]),_:2},1032,["onClick"]),o(t,{size:"small",type:"danger",onClick:w=>s.handleDelete(e.$index,e.row._id)},{default:a(()=>[m("刪除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])}const Q=E(M,[["render",I],["__scopeId","data-v-2d7f6e62"]]);export{Q as default};
