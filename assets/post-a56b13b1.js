import{d as m,g as P,a as y,h as D,i as w,t as S,X as b,j as E,Z as f,Y as L}from"./firebase-917d75a2.js";import{w as r}from"./moment-820a4055.js";let o,u,d=null;const X=m("storePost",{state:()=>({posts:[],postsLoaded:!1,loading:null}),actions:{init(){o=P(y,"posts"),u=D(o,w("date","desc")),this.loading=this.getPosts()},async getPosts(){this.postsLoaded=!1;let t=()=>{},s=new Promise(e=>t=e);return d&&d(),d=S(u,e=>{let n=[];e.forEach(a=>{let i={_id:a.id,content:a.data().content,date:a.data().date,col:"posts"};if(a.data().content.dateStart){const g=r(Number(a.data().content.dateStart.toDate())),h=r(Number(a.data().content.dateEnd.toDate())),l=r(),c=l.diff(g,"days"),p=l.diff(h,"days");console.log(c,p),c>=0&&p<=0&&n.push(i)}else n.push(i)}),this.posts=n,this.postsLoaded=!0,t()},e=>{console.error("error.message: ",e.message)}),s},async addPost(t){let s=new Date().getTime(),e=s.toString();await b(o,{content:t,date:e})},async deletePost(t){await E(f(o,t))},async updatePost(t,s){await L(f(o,t),{content:s})}},getters:{getPostContent:t=>s=>t.posts.filter(e=>e._id===s)[0].content}});export{X as u};
