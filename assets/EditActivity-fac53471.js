import{s as g,e as y}from"./loading-bb5f32dc.js";import{k as x}from"./firebase-51484e84.js";import{b as B}from"./runtime-dom.esm-bundler-a91390dd.js";import{I as A,B as L}from"./index-b9962f05.js";import{u as E}from"./activity-3634b33e.js";import{r as w,e as V}from"./index-fcdd6f12.js";import{_ as q}from"./plugin-vue_export-helper-c27b6911.js";import{a as C}from"./index-7c49e7b5.js";import{r as I,w as D,l as S,m as h,E as l,y as r,a3 as c,k as v,F as M,Y as T,x as U,C as k,D as F,aD as N,aE as R}from"./runtime-core.esm-bundler-08e2c704.js";import"./index-1d84a674.js";import"./quill-0ca21a08.js";import"./index-51ec6782.js";const Y={props:["id"],setup(i){g();const{id:t}=i,a=E(),e=I(null),o=I({title:"",content:"",links:[]}),p=()=>{o.value={title:"",content:"",links:[]}},d=[{name:"ImageDrop",module:A},{name:"BlotFormatter",module:L}],s={modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}},{activiesLoaded:f}=x(a);return D(f,_=>{_&&(y(),t&&(o.value=a.getActiviesContent(t)))},{immediate:!0,deep:!0}),{id:t,form:o,rules:{title:[{required:!0,message:"請輸入活動標題",trigger:"blur"}]},formRef:e,addLink:()=>{o.value.links.push({title:"",url:""})},onSubmit:()=>{g(),o.value.title&&o.value.content?(t?a.updateActivity(t,o.value):a.addActivity(o.value),p(),C.success(t?"更新活動成功":"新增活動成功"),w.replace({name:V})):C.error("活動標題、內容不得為空"),y()},cancel:()=>{p(),w.replace({name:V})},activityStore:a,editorOption:s,editorModules:d}}},O=i=>(N("data-v-2938bff4"),i=i(),R(),i),z={class:"inner"},H={class:"content-box"},Z=O(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[h("path",{fill:"#409eff",d:"M11 19v-6H5v-2h6V5h2v6h6v2h-6v6h-2Z"})],-1));function j(i,t,a,e,o,p){const d=c("el-input"),s=c("el-form-item"),f=c("quill-editor"),m=c("el-button"),b=c("el-form");return v(),S("div",z,[h("div",H,[l(b,{ref:"formRef",model:e.form,rules:e.rules},{default:r(()=>[l(s,{label:"活動標題",prop:"title"},{default:r(()=>[l(d,{modelValue:e.form.title,"onUpdate:modelValue":t[0]||(t[0]=n=>e.form.title=n)},null,8,["modelValue"])]),_:1}),l(f,{class:"quill-editor",theme:"snow",content:e.form.content,"onUpdate:content":t[1]||(t[1]=n=>e.form.content=n),"content-type":"html",options:e.editorOption,modules:e.editorModules},null,8,["content","options","modules"]),(v(!0),S(M,null,T(e.form.links,(n,u)=>(v(),U(s,{label:`Youtube 連結 ${u+1}`,key:u,prop:`form.links${u}.url`},{default:r(()=>[l(d,{modelValue:n.url,"onUpdate:modelValue":_=>n.url=_},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"]))),128)),l(m,{class:"add-link",onClick:B(e.addLink,["prevent"])},{default:r(()=>[k(" 增加新連結 "),Z]),_:1},8,["onClick"]),l(s,null,{default:r(()=>[l(m,{type:"primary",onClick:e.onSubmit},{default:r(()=>[k(F(e.id?"更新":"建立"),1)]),_:1},8,["onClick"]),l(m,{onClick:e.cancel},{default:r(()=>[k("取消")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])])}const ne=q(Y,[["render",j],["__scopeId","data-v-2938bff4"]]);export{ne as default};
