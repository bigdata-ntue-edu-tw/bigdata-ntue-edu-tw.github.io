import"./moment-820a4055.js";import{k as B}from"./firebase-917d75a2.js";import{b as z}from"./runtime-dom.esm-bundler-d3981d03.js";import{I as A,B as D}from"./index-021e38c9.js";import{u as L}from"./activity-099053de.js";import{s as g,e as V}from"./loading-f001d740.js";import{r as y,e as S}from"./index-b5c83b15.js";import{_ as U}from"./plugin-vue_export-helper-c27b6911.js";import{a as w}from"./index-8788ed98.js";import{r as C,w as q,l as E,m as k,E as o,y as n,a3 as d,k as _,F as M,Y as T,x as F,C as v,D as N,aD as R,aE as Y}from"./runtime-core.esm-bundler-1860ea7f.js";import"./quill-0ca21a08.js";import"./index-a861324b.js";const x={props:["id"],setup(l){g();const{id:t}=l,s=L(),e=C(null),r=C({title:"",content:"",links:[],dateStart:"",dateEnd:""}),f=()=>{r.value={title:"",content:"",links:[],dateStart:"",dateEnd:""}},c=[{name:"ImageDrop",module:A},{name:"BlotFormatter",module:D}],i={modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}},{activiesLoaded:u}=B(s);return q(u,m=>{m&&(V(),t&&(r.value=s.getActiviesContent(t)))},{immediate:!0,deep:!0}),{id:t,form:r,rules:{title:[{required:!0,message:"請輸入活動標題",trigger:"blur"}]},formRef:e,addLink:()=>{r.value.links.push({title:"",url:""})},onSubmit:()=>{g(),r.value.title&&r.value.content?(t?s.updateActivity(t,r.value):s.addActivity(r.value),f(),w.success(t?"更新活動成功":"新增活動成功"),y.replace({name:S})):w.error("活動標題、內容不得為空"),V()},cancel:()=>{f(),y.replace({name:S})},activityStore:s,editorOption:i,editorModules:c}}},O=l=>(R("data-v-376ea7a2"),l=l(),Y(),l),H={class:"inner"},Z={class:"content-box"},j=O(()=>k("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[k("path",{fill:"#409eff",d:"M11 19v-6H5v-2h6V5h2v6h6v2h-6v6h-2Z"})],-1));function G(l,t,s,e,r,f){const c=d("el-input"),i=d("el-form-item"),u=d("el-date-picker"),b=d("quill-editor"),p=d("el-button"),h=d("el-form");return _(),E("div",H,[k("div",Z,[o(h,{ref:"formRef",model:e.form,rules:e.rules},{default:n(()=>[o(i,{label:"活動標題",prop:"title"},{default:n(()=>[o(c,{modelValue:e.form.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.form.title=a)},null,8,["modelValue"])]),_:1}),o(i,{label:"上架時間",prop:""},{default:n(()=>[o(u,{modelValue:e.form.dateStart,"onUpdate:modelValue":t[1]||(t[1]=a=>e.form.dateStart=a),type:"date",placeholder:"上架時間","disabled-date":l.disabledDate,shortcuts:l.shortcuts,size:l.size},null,8,["modelValue","disabled-date","shortcuts","size"])]),_:1}),o(i,{label:"下架時間",prop:""},{default:n(()=>[o(u,{modelValue:e.form.dateEnd,"onUpdate:modelValue":t[2]||(t[2]=a=>e.form.dateEnd=a),type:"date",placeholder:"下架時間","disabled-date":l.disabledDate,shortcuts:l.shortcuts,size:l.size},null,8,["modelValue","disabled-date","shortcuts","size"])]),_:1}),o(b,{class:"quill-editor",theme:"snow",content:e.form.content,"onUpdate:content":t[3]||(t[3]=a=>e.form.content=a),"content-type":"html",options:e.editorOption,modules:e.editorModules},null,8,["content","options","modules"]),(_(!0),E(M,null,T(e.form.links,(a,m)=>(_(),F(i,{label:`Youtube 連結 ${m+1}`,key:m,prop:`form.links${m}.url`},{default:n(()=>[o(c,{modelValue:a.url,"onUpdate:modelValue":I=>a.url=I},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"]))),128)),o(p,{class:"add-link",onClick:z(e.addLink,["prevent"])},{default:n(()=>[v(" 增加新連結 "),j]),_:1},8,["onClick"]),o(i,null,{default:n(()=>[o(p,{type:"primary",onClick:e.onSubmit},{default:n(()=>[v(N(e.id?"更新":"建立"),1)]),_:1},8,["onClick"]),o(p,{onClick:e.cancel},{default:n(()=>[v("取消")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])])}const re=U(x,[["render",G],["__scopeId","data-v-376ea7a2"]]);export{re as default};
