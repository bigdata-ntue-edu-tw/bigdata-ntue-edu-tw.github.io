import{_ as P,q as U,r as b,t as z,w as E,i as q,h as D,b as N,d as r,k as w,N as g,y as k,P as V,e as i,f as v,l as t,H as S,A as B}from"./index-0f5c6cec.js";import{I}from"./index-2e753dd1.js";import{s as h,e as y}from"./loading-b0f2f0f5.js";const L={props:["id"],setup(n){h();const{id:o}=n,d=U(),e=b(null),u={title:"",content:"",imageUrl:"",dateStart:"",dateEnd:""},a=b({...u}),m=()=>{a.value={...u}},s=[{name:"ImageDrop",module:I}],c={modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]}},{postsLoaded:f}=z(d);return E(f,C=>{C&&(y(),o&&(a.value=d.getPostContent(o)))},{immediate:!0,deep:!0}),{id:o,form:a,rules:{title:[{required:!0,message:"請輸入公告標題",trigger:"blur"}]},formRef:e,onSubmit:()=>{h(),console.log(a.value),a.value.title&&a.value.content?(o?d.updatePost(o,a.value):d.addPost(a.value),m(),g.success(o?"更新公告成功":"新增公告成功"),k.replace({name:V})):g.error("公告標題、內容不得為空"),y()},cancel:()=>{m(),k.replace({name:V})},postStore:d,editorOption:c,editorModules:s}}},M={class:"inner"},O={class:"content-box"};function R(n,o,d,e,u,a){const m=i("el-input"),s=i("el-form-item"),c=i("el-date-picker"),f=i("quill-editor"),p=i("el-button"),_=i("el-form");return v(),q("div",M,[D("div",O,[e.postStore.loading?(v(),N(_,{key:0,ref:"formRef",model:e.form,rules:e.rules},{default:r(()=>[t(s,{label:"公告標題",prop:"title"},{default:r(()=>[t(m,{modelValue:e.form.title,"onUpdate:modelValue":o[0]||(o[0]=l=>e.form.title=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"公告縮圖連結",prop:"title"},{default:r(()=>[t(m,{modelValue:e.form.imageUrl,"onUpdate:modelValue":o[1]||(o[1]=l=>e.form.imageUrl=l)},null,8,["modelValue"])]),_:1}),t(s,{label:"上架時間",prop:""},{default:r(()=>[t(c,{modelValue:e.form.dateStart,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.dateStart=l),type:"date",placeholder:"上架時間","disabled-date":n.disabledDate,shortcuts:n.shortcuts,size:n.size},null,8,["modelValue","disabled-date","shortcuts","size"])]),_:1}),t(s,{label:"下架時間",prop:""},{default:r(()=>[t(c,{modelValue:e.form.dateEnd,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.dateEnd=l),type:"date",placeholder:"下架時間","disabled-date":n.disabledDate,shortcuts:n.shortcuts,size:n.size},null,8,["modelValue","disabled-date","shortcuts","size"])]),_:1}),t(f,{class:"quill-editor",theme:"snow",content:e.form.content,"onUpdate:content":o[4]||(o[4]=l=>e.form.content=l),"content-type":"html",options:e.editorOption,modules:e.editorModules},null,8,["content","options","modules"]),t(s,null,{default:r(()=>[t(p,{type:"primary",onClick:e.onSubmit},{default:r(()=>[S(B(e.id?"更新":"建立"),1)]),_:1},8,["onClick"]),t(p,{onClick:e.cancel},{default:r(()=>[S("取消")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])):w("",!0)])])}const F=P(L,[["render",R],["__scopeId","data-v-ca2ee13c"]]);export{F as default};
